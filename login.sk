command /register <text>:
    trigger:
        if {password.%uuid of player%} is set:
            send "&cMasz juÅ¼ konto! Zaloguj siÄ™ komendÄ… /login <hasÅ‚o>" to player
            stop
        set {password.%uuid of player%} to arg-1 hashed with SHA-256
        set {gamemode.%uuid of player%} to "survival"
        send title "Â§dTotalna Wyspa Å»enady" with subtitle "&7Zaloguj siÄ™ komendÄ… /login <hasÅ‚o>" to player for 9999999 seconds 

        send "&aâœ… Rejestracja zakoÅ„czona! UÅ¼yj teraz /login <hasÅ‚o>." to player

command /login <text>:
    trigger:
        if {is_logged_in.%uuid of player%} is true:
            send "&cJesteÅ› juÅ¼ zalogowany." to player
            stop
        if {password.%uuid of player%} is not set:
            send "&cNie masz jeszcze konta! UÅ¼yj /register <hasÅ‚o>" to player
            stop
        if arg-1 hashed with SHA-256 is not {password.%uuid of player%}:
            send "&câŒ BÅ‚Ä™dne hasÅ‚o!" to player
            stop
        set {is_logged_in.%uuid of player%} to true
        execute console command "gamemode %{gamemode.%uuid of player%}% %player%"
        remove blindness from player
        
        if {is_op.%uuid of player%} is true:
            op player

        send title "" with subtitle "" to player for 0 seconds

        broadcast "Â§6âœ¨ Â§e%player% Â§7doÅ‚Ä…czyÅ‚ do Â§dTotalnej Wyspy Å»enady! Â§6ğŸŒ´"
        send "Â§7Wersja serwera: Â§a1.0 Â§7Co nowego: Â§f/w oraz /re" to player

        set {lastlogin::%name of player%} to "%now%"

on quit:
    if {is_logged_in.%uuid of player%} is true:
        delete {is_logged_in.%uuid of player%}
        if player is op:
            set {is_op.%uuid of player%} to true
        else:
            set {is_op.%uuid of player%} to false
        set {gamemode.%uuid of player%} to gamemode of player

on join:
    set join message to ""
    deop player
    set {is_logged_in.%uuid of player%} to false

    if {password.%uuid of player%} is set:
        send title "Â§dTotalna Wyspa Å»enady" with subtitle "&7Zaloguj siÄ™ komendÄ… /login <hasÅ‚o>" to player for 9999999 seconds 
    else:
        send title "Â§dTotalna Wyspa Å»enady" with subtitle "&7Zarejestruj siÄ™ komendÄ… /register <hasÅ‚o>" to player for 9999999 seconds 

    execute console command "gamemode spectator %player%"
    apply blindness to player for 9999999 minutes

on player move:
    if {is_logged_in.%uuid of player%} is not true:
        cancel event

on chat:
    if {is_logged_in.%uuid of player%} is not true:
        cancel event
        send "&cMusisz siÄ™ najpierw zalogowaÄ‡!"

on command:
    if sender is not console:
        if {is_logged_in.%uuid of player%} is not true:
            if command is not "login" or "register":
                cancel event
                send "&cMusisz siÄ™ najpierw zalogowaÄ‡!"
                stop
        if sender is not "chris":
            if command is "deop" or "sk" or "leturmemoryrest" or "spark":
                cancel event

command /gracze:
    permission: op
    trigger:
        send "&7" to player
        loop {lastlogin::*}:
            set {_playername} to loop-index 
            set {_lastlogin} to loop-value
            send "&7Gracz: &f%{_playername}% &7Ostatnie logowanie: &f%{_lastlogin}%" to player
